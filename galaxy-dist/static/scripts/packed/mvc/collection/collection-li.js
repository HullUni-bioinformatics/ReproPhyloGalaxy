define(["mvc/list/list-item","mvc/dataset/dataset-li","mvc/base-mvc","utils/localization"],function(a,h,i,d){var j=a.FoldoutListItemView,e=a.ListItemView;var c=j.extend({className:j.prototype.className+" dataset-collection",id:function(){return["dataset_collection",this.model.get("id")].join("-")},initialize:function(k){j.prototype.initialize.call(this,k);this.linkTarget=k.linkTarget||"_blank"},_renderSubtitle:function(){var k=$('<div class="subtitle"></div>');switch(this.model.get("collection_type")){case"list":return k.text(d("a list of datasets"));case"paired":return k.text(d("a pair of datasets"));case"list:paired":return k.text(d("a list of paired datasets"))}return k},_getFoldoutPanelOptions:function(){var k=j.prototype._getFoldoutPanelOptions.call(this);return _.extend(k,{linkTarget:this.linkTarget})},$selector:function(){return this.$("> .selector")},toString:function(){var k=(this.model)?(this.model+""):("(no model)");return"DCListItemView("+k+")"}});c.prototype.templates=(function(){var k=i.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- collection.element_identifier || collection.name %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"collection");return _.extend({},j.prototype.templates,{titleBar:k})}());var f=e.extend({className:e.prototype.className+" dataset-collection-element",fxSpeed:"fast",initialize:function(k){if(k.logger){this.logger=this.model.logger=k.logger}this.log("DCEListItemView.initialize:",k);e.prototype.initialize.call(this,k)},toString:function(){var k=(this.model)?(this.model+""):("(no model)");return"DCEListItemView("+k+")"}});f.prototype.templates=(function(){var k=i.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>",'<div class="subtitle"></div>',"</div>"],"element");return _.extend({},e.prototype.templates,{titleBar:k})}());var b=h.DatasetListItemView.extend({className:h.DatasetListItemView.prototype.className+" dataset-collection-element",initialize:function(k){if(k.logger){this.logger=this.model.logger=k.logger}this.log("DatasetDCEListItemView.initialize:",k);h.DatasetListItemView.prototype.initialize.call(this,k)},toString:function(){var k=(this.model)?(this.model+""):("(no model)");return"DatasetDCEListItemView("+k+")"}});b.prototype.templates=(function(){var k=i.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<span class="state-icon"></span>','<div class="title">','<span class="name"><%- element.element_identifier %></span>',"</div>","</div>"],"element");return _.extend({},h.DatasetListItemView.prototype.templates,{titleBar:k})}());var g=c.extend({className:c.prototype.className+" dataset-collection-element",_swapNewRender:function(k){c.prototype._swapNewRender.call(this,k);var l=this.model.get("state")||"ok";this.$el.addClass("state-"+l);return this.$el},toString:function(){var k=(this.model)?(this.model+""):("(no model)");return"NestedDCDCEListItemView("+k+")"}});return{DCListItemView:c,DCEListItemView:f,DatasetDCEListItemView:b,NestedDCDCEListItemView:g}});